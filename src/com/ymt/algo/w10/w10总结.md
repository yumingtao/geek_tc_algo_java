# Week-10总结

## 知识点总结

### 位运算

1. 基础
    - 计算机底层采用二进制对数值进行表示、存储、运算
    - 程序中适当使用二进制，可以提高运行效率
    - 十进制转二进制采用短除法
        - 将商不断的模2，当商==0时，将余数倒序
    - 二进制转十进制采用幂次和
        - 右边是最低位，记为第0位，向左依次+1，做为幂次
        - 从最低位开始，依次用每一位的数0/1与2的i次幂相乘后再相加求和
2. 为运算符

   |运算符|含义|注释|示例|特点及应用
                                                               |---|---|---|---|---
   |&|按位与|都是1得1，否则得0|1011 & 0011 -> 0011|任何数与1取&都得其本身，0与任何数&都是0
   |&#124;|按位或|都是0得0，否则得1 |1011 &#124; 0011 -> 1011 |0与任何数取或都得其本身
   |~|按位取反|1得0，0得1|0011 -> 1100 |
   |^|按位异或,xor|相同得0，不同得1,可以理解为不进位加法|1011 ^ 0011 -> 1000|x^0=x 任何数与0异或都得其本身<br>  x^x=0 任何数与其本身异或都得0<br> 结合律：a^b^c=a^(b^c)=(a^b^c) <br> 成对变换：x^1 <br> 交换两个数：a=a^b;b=a^b;a=a^b;
   |<<|算术左移|舍去高位，低位补0|0011 -> 0110|在java中为有符号的左移位操作，相当于乘2。逻辑左移为<<<,表示无符号的移左
   |\>>|算术右移|舍去低位，正数时高位补0，负数时高位补1，为符号位|0011 -> 0001|在java中为有符号的右移位操作，相当于除以2。逻辑右移为>>>，表示无符号的右移，高位补0

3. 指定位置的位运算
    - 获取x在二进制下的第n位
        - 利用1(二进制表示为...0001)与任何数按位&都是其本身，0与任何数&都是0的特点
        - 先将需要判断的位左移到与1的最低位，第0位的1对齐，然后&
        - 判断是1 ：((x>>n) & 1) == 1
        - 判断是0 ：((x>>n) & 1) == 0
    - 设置x在二进制下的第n位
        - 设置为1：x｜(1<<n)
            - 先把1(二进制...0001)中的1移动到n的位置，利用任何数与1取或都是1的特点
        - 设置为0：x & (~(1<<n))
            - 先把1(二进制...0001)中的1移动到n的位置，然后取反，使第n个位置变为0，其余都是1
            - 利用1与任何数&都是数本身，0与任何数&都是0的特点
    - 将x在二进制下的第n位取反
        - x ^ (1<<n)
        - 先把1(二进制...0001)中的1移动到n的位置
        - 利用0与任何数^都是其本身，1^1=0的特性
    - 将x最右边的n个位置清零
        - x & (~0<<n)
        - 先把0(二进制...0000)取反，使之都变成1
        - 然后左移n位，让右边的n个位置都补0
        - 利用0与任何数&都是0的特性
    - 将x最高位至第n(含)个位置清零
        - x & ((1<<n)-1)
        - 先把1(二进制...0001)左移n位，变成...0001000...
        - 再-1，-1操作会借位，变成 ..0000111..，刚好把最高位到n的位置都变为0，后边全是1
        - 然后再&，利用0与任何数&都是0的特性

4. 位运算实战要点
    - 判读奇偶，利用1与任何数&都是其本身的特点
        - 判断偶数： x % 2 == 0，可换为 (x&1) == 0，
        - 判断奇数： x % 2 == 1，可换为 (x&1) == 1
        - 注意：偶数的最低位是0，奇数的最低位是1
    - 除以2的幂次
        - x/2 -> x>>1
    - 乘以2的幂次
        - x*2 -> x<<1
    - lowbit
        - 得到最低位的1：x&-x 或 x&(~x+1)
        - 清零最低位的1：x=x&(x-1)

5. 注意点
    - 位运算操作的优先级比较低，在实际应用过程中，注意使用括号来提高优先级